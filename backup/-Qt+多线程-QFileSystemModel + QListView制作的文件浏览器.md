# 前言
之前遇见一个文件浏览器，按页显示，缩略图又只有一个线程在加载，自然导致当文件足够多的时候一个个翻页麻烦，而且缩略图加载缓慢，而且样式也不美观，所以利用Qt自制了一款和电脑端的文件浏览器差不多的文件浏览器，即上下滑动，缩略图使用多线程进行加载

# 要点
1. Qt的控件虽然也有自带缩略图功能，但是不是我想要的，所以通过继承QFileIconProvider重写icon函数实现自定义的缩略图显示
2. 需要加载缩略图的文件有可能很多，运用QChache容器可以使大部分情况不用再重复加载，QChache还能使当容器满的时候再添加会自动把最前添加的文件释放掉，自动管理，很方便
3. 既然是多线程，就要考虑线程同步问题，这边我使用了线程锁QMutex
4. 不同的图片、视频的分辨率都有可能不一致，而且只需要缩略图，所以可以统一大小，例如128x128或者其他
5. 对于视频文件的缩略图使用了二层缓存策略，即不仅在代码里使用QChache，还在文件的当前路径生成一个隐藏的文件夹，存放视频文件的缩略图图片，因为使用ffmpeg生成图片是很消耗时间和性能的
6. 原先的QListView默认是不支持手势的，需要在代码里捕捉手势动作，再在手势处理函数里处理才行
7. ‎IconViewDelegate是一个Icon样式的代理，可以在此自定义Icon的样式
8. 运用到了QThreadPool，即由Qt自身的线程池进行管理，设置了QThread::idealThreadCount() / 2 + 1大小，即当前CPU核数一半+1

# 代码地址
https://github.com/2016317200404/work-essay/tree/main/MyFileManager